<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>购物车 - 网易云阅读</title>
		<link rel="stylesheet" href="css/sass/shopCar.css" />
		<link rel="stylesheet" href="css/sass/cart-modern.css" />
		<link rel="stylesheet" href="css/sass/public.css" />
		<link rel="stylesheet" type="text/css" href="iconf/iconfont.css" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.0/css/swiper.css">
	</head>
	<body class="cart-page" data-page="cart">
		<!--头部-->
		<div class="headerFix">
			<div class="area">
				<h2><a href="index.html">网易阅读</a></h2>
				<ul>
					<li><a href="index.html">首页</a></li>
					<li><a href="#">出版图书</a></li>
					<li><a href="#">国风中文网</a></li>
					<li><a href="#">采薇书院</a></li>
					<li><a href="#">排行榜</a></li>
					<li><a href="#">客户端下载</a></li>
				</ul>
				<div class="herdFix-search">
					<input type="text" class="search" placeholder="请输入关键字" />
					<ul class="showBox"></ul>
					<button class="btn-seach"></button>
				</div>
			</div>
		</div>
		<div class="head">
			<div class="area">
				<header>
					<ul class="head-nav">
						<li><a href="#" title="网易云阅读">网易云阅读</a></li>
						<li><span>|</span></li>
						<li><a href="#" title="国风中文网">国风中文网</a></li>
						<li><span>|</span></li>
						<li><a href="#" title="采薇书院">采薇书院</a></li>
						<li><span>|</span></li>
						<li><a href="#" title="从电脑上导出书籍">从电脑上导出书籍</a></li>
						<li><span>|</span></li>
						<li><a href="#" title="公众号">公众号</a></li>
						<li><span>|</span></li>
						<li><a href="#" title="渠道推广平台">渠道推广平台</a></li>
					</ul>
					<div class="login">
						<ul>
							<li><a href="login.html">登陆<i class="triangle"></i></a></li>
							<li><span>|</span></li>
							<li><a href="register.html">注册</a></li>
							<li><span>|</span></li>
							<li><a href="#">举报</a></li>
						</ul>
					</div>
				</header>
			</div>
		</div>
		<!--内容部分-->
		<section>
			<div class="area">
				<div class="nav-seach">
					<div class="logo">
						<h1><a href="index.html">网易云阅读</a></h1>
					</div>
					<div class="clouds">
						<a href="shopCar.html"><i class="iconfont icon-gouwuche"></i>购物车</a>
					</div>
				</div>
				<div class="nav-nav">
				</div>
				
				<!-- 现代化购物车容器 -->
				<div class="cart-container">
					<div class="cart-header">
						<h1>我的购物车</h1>
						<p>精选好书，等您带回家</p>
					</div>
					
					<!-- 购物车操作栏 -->
					<div class="operation">
						<div style="display: flex; gap: 20px; align-items: center; padding: 20px 30px; background: #f8f9fa; border-bottom: 1px solid #eee;">
							<a href="#" class="tab-link active" data-tab="cart">
								我的书籍 <span class="book-num" style="color: #c9483c; font-weight: 600;">0</span>
							</a>
							<a href="#" class="tab-link" data-tab="deleted">
								已删除的书籍 <span class="deleted-num" style="color: #666; font-weight: 600;">0</span>
							</a>
							<div style="margin-left: auto; display: flex; gap: 15px; align-items: center;">
								<a href="index.html" class="btn-home" style="padding: 8px 16px; font-size: 14px; text-decoration: none; background: #28a745; color: white; border-radius: 6px; transition: all 0.2s ease;">
									<i class="iconfont icon-home" style="margin-right: 5px;"></i>返回首页
								</a>
								<button class="btn-secondary view-deleted-btn" style="padding: 8px 16px; font-size: 14px;">查看已删除</button>
							</div>
						</div>
					</div>
					
					<!-- 购物车内容区 -->
					<div class="cart-content">
						<!-- 购物车商品列表 -->
						<div class="cart-items-container">
							<!-- 购物车商品将在这里动态生成 -->
						</div>
					</div>
					
					<!-- 已删除商品容器 -->
					<div class="deleted-items-container" style="display: none;">
						<div class="cart-header" style="background: #6c757d;">
							<h2 style="margin: 0; font-size: 20px;">已删除的书籍</h2>
							<p style="margin: 10px 0 0; opacity: 0.9;">可以恢复或永久删除</p>
						</div>
						<div class="deleted-items-list">
							<!-- 已删除商品将在这里动态生成 -->
						</div>
						<div class="deleted-actions" style="padding: 20px 30px; background: #f8f9fa; border-top: 1px solid #eee;">
							<button class="btn-secondary restore-all-btn" style="margin-right: 15px;">恢复全部</button>
							<button class="btn-danger clear-deleted-btn" style="background: #dc3545; color: white;">清空已删除</button>
						</div>
					</div>
				</div>
				
				<!-- 保留原有的shopBox结构以兼容旧代码 -->
				<div class="shopBox" style="display: none;">
					<div class="operation">
						<div>
							<a href="#">我的书籍<i class="book-num" style="color: #000;">0</i></a>
							<a href="#">我删除的书籍<i class="num" style="color: #000;">0</i></a>
						</div>
					</div>
					<div class="shopStore" style="height: 100%;">
						<div class="swiper-container" style="height: 500px;">
							<div class="swiper-wrapper">
								
							</div>							
						</div>
					</div>
				</div>
			</div>
		</section>
		<!--尾部-->
		<footer>
			<div class="index_bottom">
				<div class="ib_nav">
					<ul class="ib_ul">
						<li class="ib_li">
							<h3>出版图书</h3>
							<p>
								<a href="">小说作品</a>
								<a href="">人文社科</a>
								<a href="">成功励志</a>
								<a href="">经济管理</a>
								<a href="">品质生活</a>
								<a href="">计算机</a>
								<a href="">文学作品</a>
								<a href="">更多</a>
							</p>
						</li>
						<li>
							<h3>国风中文网</h3>
							<p>
								<a href="">都市生活</a>
								<a href="">官场职场</a>
								<a href="">玄幻仙侠</a>
								<a href="">科幻奇幻</a>                            
								<a href="">军事谍战</a>
								<a href="">悬疑探险</a>
								<a href="">灵异恐怖</a>
								<a href="">更多</a>
							</p>
						 </li>
						<li>
							<h3>采薇书院</h3>
							<p>                      
								<a href="">都市言情</a>
								<a href="">穿越架空</a>
								<a href="">种田重生</a>
								<a href="">宫斗宅斗</a>
								<a href="">古风古韵</a>
								<a href="">仙侠幻情</a>
								<a href="">浪漫青春</a>
								<a href="">更多</a>
							</p>
						</li>
						<li>
							<h3>杂志</h3>
							<p>
								<a href="">国家人文</a>
								<a href="">南方人物</a>
								<a href="">南都周刊</a>
								<a href="">财经</a>
								<a href="">读者</a>
								<a href="">意林</a>
								<a href="">青年文摘</a>
								<a href="">更多</a>
							</p>
						</li>
					</ul>
				</div>
			</div>
			<div class="com_foot">
				<div class="com_footer">
					<div class="com_footer1">
						<p class="com_flink">
							<a href="">网易简介</a><span class="sep">|</span>
							<a href="">公司简介</a><span class="sep">|</span>
							<a href="">客户服务</a><span class="sep">|</span>
							<a href="">相关法律</a><span class="sep">|</span>
							<a href="">网站导航</a><span class="sep">|</span>
							<a href="">意见反馈</a><span class="sep">|</span>
							<a href="">客服电话</a><span class="sep">|</span>
							<a href="">帮助中心</a><span class="sep">|</span>
							<a href="">作者中心</a>
						</p>
					</div>
					<div class="com_footer2">
						<p>
							网易公司版权所有©1997-
							<span id="j-year">2019</span> &nbsp;&nbsp;网络出版服务许可证（总）网出证（粤）字第030号 &nbsp;&nbsp;信息网络传播视听节目许可证号1908260 &nbsp;&nbsp;增值电信业务经营许可证 浙B2-20160599
						</p>
					</div>
					<div class="com_footer3"></div>
				</div>
			</div>

		</footer>
	</body>
	<!-- 添加必要的JavaScript文件 -->
	<script src="js/jquery-2.1.0.js"></script>
	<script src="js/utils.js"></script>
	<script src="js/auth.js"></script>
	<script src="js/cart.js"></script>
	<script src="js/shopCar.js"></script>
	<script src="js/Jsonp.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.0/js/swiper.js"></script>
	<script>
		// 页面初始化
		document.addEventListener('DOMContentLoaded', function() {
			console.log('购物车页面加载完成');
			
			// 更新用户登录状态显示
			if (typeof updateUserStatus !== 'undefined') {
				updateUserStatus();
			}
			
			// 初始化搜索功能
			if (typeof showText !== 'undefined') {
				showText.init(".search-box");
			}
			
			// 初始化旧的购物车功能（兼容性）
			if (typeof carShop !== 'undefined') {
				carShop.init();
			}
			
			// 初始化现代化购物车显示
			if (window.cart) {
				window.cart.updateCartDisplay();
			}
			
			// 绑定标签切换事件
			document.querySelectorAll('.tab-link').forEach(link => {
				link.addEventListener('click', function(e) {
					e.preventDefault();
					
					// 移除所有active类
					document.querySelectorAll('.tab-link').forEach(l => l.classList.remove('active'));
					// 添加active类到当前链接
					this.classList.add('active');
					
					const tab = this.dataset.tab;
					const cartContainer = document.querySelector('.cart-items-container').parentElement;
					const deletedContainer = document.querySelector('.deleted-items-container');
					
					if (tab === 'cart') {
						cartContainer.style.display = 'block';
						deletedContainer.style.display = 'none';
					} else if (tab === 'deleted') {
						cartContainer.style.display = 'none';
						deletedContainer.style.display = 'block';
						// 更新已删除商品显示
						if (window.shopCarPage) {
							window.shopCarPage.updateDeletedItemsDisplay();
						}
					}
				});
			});
			
			// 绑定已删除商品操作按钮
			document.addEventListener('click', function(e) {
				if (e.target.classList.contains('restore-all-btn')) {
					if (window.shopCarPage) {
						window.shopCarPage.restoreAllItems();
					}
				}
				
				if (e.target.classList.contains('clear-deleted-btn')) {
					if (window.shopCarPage) {
						window.shopCarPage.clearDeletedItems();
					}
				}
			});
		});
	</script>

</html>